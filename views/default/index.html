{{left_sidebar_enabled,right_sidebar_enabled=False,True}}
{{
#response.files.append(URL('static','3Dgallery/css/style.css'))
response.files.append(URL('static', 'galleryview/css/jquery.galleryview-3.0-dev.css'))
#response.files.append(URL('static', '3Dgallery/js/jquery.gallery.js'))
response.files.append(URL('static', 'galleryview/js/jquery.timers-1.2.js'))
response.files.append(URL('static', 'galleryview/js/jquery.easing.1.3.js'))
response.files.append(URL('static', 'galleryview/js/jquery.galleryview-3.0-dev.js'))
response.files.append(URL('static', 'js/jquery.masonry.min.js'))
}}

{{extend 'layout2.html'}}

{{block statusbar}}
    <div class="breadcrumbs"><a href="{{=URL('default', 'index')}}">Home</a></div>
{{end}}

{{block center}}
<!-- <section id="dg-container">
				<div class="dg-wrapper">
					{{for movie in slider_movies:}}
					<a href="{{=URL('movie', 'show', args=[movie.get('id')])}}"><img src="{{=URL('static', movie.get('poster'))}}"></a>
					{{pass}}
				</div>		
</section> -->
<!-- <script type="text/javascript">
	$(function(){
		$('#myGallery').galleryView({
			panel_scale: 'fit',
     		autoplay: true,
     		panel_width: 490,
     		panel_height: 550,
     		pan_images: true,
     		pan_style: 'track',
		});
	});
</script>
	<ul id="myGallery">
		{{for movie in slider_movies:}}
					<li><img src="{{=URL('static', movie.get('poster'))}}"></li>
		{{pass}}
		
	</ul>
	<p>Please view the source of this page if you are having difficulties setting up GalleryView.</p> -->
{{end}}
<div id="search">
<div class="outer-center">
	<div class="inner-center">
			<form action="{{=URL('search')}}">
				<input type="text" name="s"/>
				<input type="submit" value="Search" />
			</form>	
	</div>
</div>
</div>
<section id="masonry-content" class="centered">
	{{for movie in list_movies:}}
	<div class="masonry-item">
		<a href="{{=URL('movie', 'show', args=[movie.get('id')])}}"><img src="{{=URL('static', movie.get('poster'))}}" /></a>
		<div class="movie-info">
			<div class="movie-title">{{=movie.get('title')}} ({{=movie.get('year')}})</div>
			{{if not movie.get('year') or movie.poster.startswith('images/unknown'):
			      schedule_movie(movie.get('id'), reviews=True)
			  pass
			}}
			<div class="genre">
				<span class="bold">Genre:</span>
				{{for rel in movie.get('movies_genres').select():}}
				{{=A(rel.genre.name, _href=URL('search', vars={'genres':(rel.genre.id,)}))}}
				{{pass}}
			</div>
			<div class="ratings">
				<span class="bold">Ratings:</span>
				{{=movie.ratings.count()}}
			</div>
		</div>
		<div class="comments">
			
		</div>
	</div>
	{{pass}}
	
</section>
<script type="text/javascript">
$(function() {
	// $('#dg-container').gallery({
		// autoplay	:	true
	// });
	
	var $container = $('#masonry-content');
	$container.imagesLoaded(function(){
	  $container.masonry({
	    itemSelector : '.masonry-item',
	   	columnWidth: 250,
	    isAnimated: true,
	    isFitWidth: true,
	  });
	});
	
});
</script>
<div id="paging-container">
	<div class="outer-center">
		<div class="inner-center">
			<div>
				{{if page != 0:}}
				{{=A('Previous', _href=URL(args=[page-1], vars=request.vars))}}
				{{pass}}
				{{if items_per_page*page < max_items:}}
				{{=A('Next', _href=URL(args=[page+1], vars=request.vars))}}
				{{pass}}	
			</div>
		</div>	
	</div>
</div>

{{block right_sidebar}}

{{end}}

